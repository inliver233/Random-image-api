# This file is loaded by `deploy/docker-compose.yml` via `env_file`.
# (Recommended) For production, copy to `deploy/.env` and point compose to it.
APP_ENV=dev

# SQLite file inside the container. Must live on the shared /app/data volume.
DATABASE_URL=sqlite+aiosqlite:///./data/app.db

# Worker（任务执行器）
# - docker compose 默认只启动 1 个 worker 容器；worker 进程内部会并发执行多个 job。
# - (Recommended) 默认开启“自动并发”：并发度会按启用 token 数自动增减，但会被上限限制。
WORKER_AUTO_CONCURRENCY=true
# 自动并发刷新频率（秒）：token 数变化后多久生效
WORKER_AUTO_CONCURRENCY_REFRESH_SECONDS=15
# 并发上限（无论 token 有多少都不会超过这个值）
WORKER_MAX_CONCURRENCY=20

# Secrets (do NOT commit real values).
SECRET_KEY=dev-secret-key-change-me
# FIELD_ENCRYPTION_KEY is required in prod. In dev, if left blank, the app auto-generates
# a Fernet key and persists it to `./data/field_encryption_key`.
FIELD_ENCRYPTION_KEY=
# Alternatively, load it from a file (recommended for container/secret mounts):
# FIELD_ENCRYPTION_KEY_FILE=./data/field_encryption_key

ADMIN_USERNAME=admin
ADMIN_PASSWORD=admin-change-me

# Pixiv OAuth (required for token refresh + metadata hydrate jobs).
# If left blank, token refresh / hydration jobs will be disabled.
PIXIV_OAUTH_CLIENT_ID=
PIXIV_OAUTH_CLIENT_SECRET=
PIXIV_OAUTH_HASH_SECRET=

# Optional build metadata
APP_VERSION=dev
APP_BUILD_TIME=
APP_COMMIT=

# Optional: imgproxy (signed URL)
# IMGPROXY_BASE_URL=http://imgproxy:8080
# IMGPROXY_KEY=
# IMGPROXY_SALT=
# IMGPROXY_MAX_DIM=2048
# IMGPROXY_DEFAULT_OPTIONS=
# IMGPROXY_URL_CHUNK_SIZE=16

# Optional: public API key protection (external access)
# PUBLIC_API_KEY_REQUIRED=false
# PUBLIC_API_KEY_RPM=0
# PUBLIC_API_KEY_BURST=0
